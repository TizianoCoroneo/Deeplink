{"identifier":{"url":"doc:\/\/Deeplink\/tutorials\/Deeplink\/Advanced-Usage","interfaceLanguage":"swift"},"sections":[{"kind":"hero","content":[{"inlineContent":[{"type":"text","text":"This tutorial is a small collection of advanced tips and tricks."}],"type":"paragraph"}],"title":"Advanced Usage","chapter":"Using the library","estimatedTimeInMinutes":10},{"kind":"tasks","tasks":[{"title":"Altering the matching behavior","contentSection":[{"content":[{"inlineContent":[{"text":"In normal usage of this library, you ","type":"text"},{"code":"return true","type":"codeVoice"},{"type":"text","text":" from the "},{"code":"ifMatching","type":"codeVoice"},{"type":"text","text":" closure on the "},{"identifier":"doc:\/\/Deeplink\/documentation\/Deeplink\/DeeplinksCenter","type":"reference","isActive":true},{"text":" ","type":"text"},{"code":"register","type":"codeVoice"},{"text":" methods.","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"What if we returned false? Why would you do that?"}]},{"type":"paragraph","inlineContent":[{"text":"In this section, we’ll implement a simple AB testing behavior for interpreting deeplinks.","type":"text"}]}],"kind":"fullWidth"}],"anchor":"Altering-the-matching-behavior","stepsSection":[{"caption":[{"type":"paragraph","inlineContent":[{"text":"What we want is to show one screen to 50% of the users and a different version of that screen to the rest. Let’s say that we have some kind of ","type":"text"},{"code":"isMagicOn()","type":"codeVoice"},{"type":"text","text":" function that returns "},{"code":"true","type":"codeVoice"},{"text":" if we should show the alternative view.","type":"text"}]}],"type":"step","content":[{"inlineContent":[{"text":"Let’s start from a simple setup: we have only our product deeplink.","type":"text"}],"type":"paragraph"}],"media":null,"code":"AdvancedUsage 1.swift","runtimePreview":null},{"runtimePreview":null,"type":"step","content":[{"type":"paragraph","inlineContent":[{"text":"We can embed the check directly inside the ","type":"text"},{"code":"ifMatching","type":"codeVoice"},{"type":"text","text":" function…"}]}],"code":"AdvancedUsage 2.swift","caption":[],"media":null},{"caption":[{"type":"paragraph","inlineContent":[{"type":"text","text":"In the first registration we check "},{"type":"codeVoice","code":"isMagicOn"},{"type":"text","text":" and we only continue if it is "},{"type":"codeVoice","code":"true"},{"text":". This means that if the other registration will only ever be executed if ","type":"text"},{"code":"isMagicOn","type":"codeVoice"},{"text":" is ","type":"text"},{"code":"false","type":"codeVoice"},{"type":"text","text":", since "},{"isActive":true,"type":"reference","identifier":"doc:\/\/Deeplink\/documentation\/Deeplink\/DeeplinksCenter"},{"type":"text","text":" will stop evaluating templates at the first successful match. This also makes it really easy to remove the Magic part if… needed."}]}],"code":"AdvancedUsage 3.swift","content":[{"inlineContent":[{"text":"Or we can register the same deeplink template twice.","type":"text"}],"type":"paragraph"}],"type":"step","runtimePreview":null,"media":null},{"media":null,"code":"AdvancedUsage 4.swift","content":[{"type":"paragraph","inlineContent":[{"text":"Since you also get the original URL that is being evaluated, you can also perform additional URL checking logic in the ","type":"text"},{"type":"codeVoice","code":"ifMatching"},{"type":"text","text":" closure, returning "},{"code":"false","type":"codeVoice"},{"text":" if the checks fail.","type":"text"}]}],"type":"step","runtimePreview":null,"caption":[]}]},{"title":"Using DefaultInitializable","stepsSection":[{"media":null,"caption":[{"type":"paragraph","inlineContent":[{"text":"Normally, we pass an instance of Product to the register function.","type":"text"}]}],"type":"step","runtimePreview":null,"code":"AdvancedUsage 5.swift","content":[{"inlineContent":[{"type":"text","text":"Let’s start from our product deeplink."}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"text":"We can make Product conform to ","type":"text"},{"isActive":true,"identifier":"doc:\/\/Deeplink\/documentation\/Deeplink\/DefaultInitializable","type":"reference"},{"type":"text","text":" so that we don’t have to pass an instance at registration time, but a new instance will be generated every time you need to parse a URL."}]}],"caption":[],"code":"AdvancedUsage 6.swift","media":null,"runtimePreview":null,"type":"step"}],"contentSection":[{"kind":"fullWidth","content":[{"inlineContent":[{"text":"“Why do I have to pass an instance of my value to the register function?”","type":"text"}],"type":"paragraph"},{"type":"paragraph","inlineContent":[{"type":"text","text":"The problem is that the library needs an initialized object to assign values to. That’s it: or you give an initialized object, or you define a struct that conforms to the utility protocol "},{"identifier":"doc:\/\/Deeplink\/documentation\/Deeplink\/DefaultInitializable","isActive":true,"type":"reference"},{"type":"text","text":", which only requirement is a empty "},{"code":"init()","type":"codeVoice"},{"type":"text","text":"."}]}]}],"anchor":"Using-DefaultInitializable"}]}],"variants":[{"paths":["\/tutorials\/deeplink\/advanced-usage"],"traits":[{"interfaceLanguage":"swift"}]}],"schemaVersion":{"minor":3,"patch":0,"major":0},"kind":"project","hierarchy":{"reference":"doc:\/\/Deeplink\/tutorials\/Table-of-Contents","modules":[{"reference":"doc:\/\/Deeplink\/tutorials\/Table-of-Contents\/Using-the-library","projects":[{"reference":"doc:\/\/Deeplink\/tutorials\/Deeplink\/Adding-a-Deeplink","sections":[{"reference":"doc:\/\/Deeplink\/tutorials\/Deeplink\/Adding-a-Deeplink#Adding-one-deeplink","kind":"task"},{"reference":"doc:\/\/Deeplink\/tutorials\/Deeplink\/Adding-a-Deeplink#Adding-a-deeplink-that-catches-a-list-of-parameters","kind":"task"},{"kind":"task","reference":"doc:\/\/Deeplink\/tutorials\/Deeplink\/Adding-a-Deeplink#Adding-more-deeplinks"}]},{"reference":"doc:\/\/Deeplink\/tutorials\/Deeplink\/Using-a-ResultBuilder","sections":[{"kind":"task","reference":"doc:\/\/Deeplink\/tutorials\/Deeplink\/Using-a-ResultBuilder#Implementation"},{"kind":"task","reference":"doc:\/\/Deeplink\/tutorials\/Deeplink\/Using-a-ResultBuilder#Conditionally-removing-templates"}]},{"sections":[{"kind":"task","reference":"doc:\/\/Deeplink\/tutorials\/Deeplink\/Advanced-Usage#Altering-the-matching-behavior"},{"kind":"task","reference":"doc:\/\/Deeplink\/tutorials\/Deeplink\/Advanced-Usage#Using-DefaultInitializable"}],"reference":"doc:\/\/Deeplink\/tutorials\/Deeplink\/Advanced-Usage"}]}],"paths":[["doc:\/\/Deeplink\/tutorials\/Table-of-Contents","doc:\/\/Deeplink\/tutorials\/Table-of-Contents\/$volume","doc:\/\/Deeplink\/tutorials\/Table-of-Contents\/Using-the-library"]]},"metadata":{"role":"project","categoryPathComponent":"Table-of-Contents","category":"Documentation","title":"Advanced Usage"},"references":{"AdvancedUsage 1.swift":{"identifier":"AdvancedUsage 1.swift","fileType":"swift","highlights":[],"syntax":"swift","content":["","\/\/ Example link: `https:\/\/example.com\/product\/123`","","import Deeplink","","struct Product {","    var productId: String?","}","","let productDeeplink: Deeplink<Product> = try! \"\/product\/\\(\\.productId)\"","","func isMagicOn() -> Bool { true }"],"fileName":"Altering matching.swift","type":"file"},"doc://Deeplink/documentation/Deeplink/DefaultInitializable":{"type":"topic","navigatorTitle":[{"text":"DefaultInitializable","kind":"identifier"}],"identifier":"doc:\/\/Deeplink\/documentation\/Deeplink\/DefaultInitializable","role":"symbol","abstract":[{"text":"A protocol which only requirement is an empty initializer.","type":"text"}],"kind":"symbol","title":"DefaultInitializable","url":"\/documentation\/deeplink\/defaultinitializable","fragments":[{"text":"protocol","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"DefaultInitializable"}]},"doc://Deeplink/tutorials/Deeplink/Using-a-ResultBuilder#Implementation":{"title":"Implementation","abstract":[{"type":"text","text":"If you need advanced behaviors, you can also register your "},{"type":"reference","identifier":"doc:\/\/Deeplink\/documentation\/Deeplink\/Deeplink","isActive":true},{"type":"text","text":" templates using a "},{"code":"@resultBuilder","type":"codeVoice"},{"type":"text","text":"."}],"identifier":"doc:\/\/Deeplink\/tutorials\/Deeplink\/Using-a-ResultBuilder#Implementation","role":"pseudoSymbol","type":"section","kind":"section","url":"\/tutorials\/deeplink\/using-a-resultbuilder#Implementation"},"AdvancedUsage 5.swift":{"type":"file","syntax":"swift","highlights":[],"fileType":"swift","content":["","\/\/ Example link: `https:\/\/example.com\/product\/123`","","import Deeplink","","struct Product {","    var productId: String?","}","","let productDeeplink: Deeplink<Product> = try! \"\/product\/\\(\\.productId)\"","","let center = DeeplinksCenter()","","center","    .register(","        deeplink: productDeeplink,","        assigningTo: Product(),","        ifMatching: { url, value in","","        \/\/ Present the product view.","","        return true","    })"],"fileName":"DefaultInitializable demo.swift","identifier":"AdvancedUsage 5.swift"},"doc://Deeplink/tutorials/Deeplink/Advanced-Usage#Using-DefaultInitializable":{"title":"Using DefaultInitializable","abstract":[{"type":"text","text":"This tutorial is a small collection of advanced tips and tricks."}],"identifier":"doc:\/\/Deeplink\/tutorials\/Deeplink\/Advanced-Usage#Using-DefaultInitializable","role":"pseudoSymbol","type":"section","kind":"section","url":"\/tutorials\/deeplink\/advanced-usage#Using-DefaultInitializable"},"doc://Deeplink/tutorials/Deeplink/Advanced-Usage":{"kind":"project","abstract":[{"text":"This tutorial is a small collection of advanced tips and tricks.","type":"text"}],"title":"Advanced Usage","estimatedTime":"10min","url":"\/tutorials\/deeplink\/advanced-usage","identifier":"doc:\/\/Deeplink\/tutorials\/Deeplink\/Advanced-Usage","type":"topic","role":"project"},"AdvancedUsage 2.swift":{"highlights":[{"line":13},{"line":14},{"line":15},{"line":16},{"line":17},{"line":18},{"line":19},{"line":20},{"line":21},{"line":22},{"line":23},{"line":24},{"line":25},{"line":26},{"line":27},{"line":28},{"line":29}],"type":"file","content":["","\/\/ Example link: `https:\/\/example.com\/product\/123`","","import Deeplink","","struct Product {","    var productId: String?","}","","let productDeeplink: Deeplink<Product> = try! \"\/product\/\\(\\.productId)\"","","func isMagicOn() -> Bool { true }","","let center = DeeplinksCenter()","","center","    .register(","        deeplink: productDeeplink,","        assigningTo: Product(),","        ifMatching: { url, value in","","        if isMagicOn() {","            \/\/ Present the magic product view.","        } else {","            \/\/ Present the normal product view.","        }","","        return true","    })"],"identifier":"AdvancedUsage 2.swift","fileType":"swift","fileName":"Altering matching.swift","syntax":"swift"},"doc://Deeplink/documentation/Deeplink/Deeplink":{"url":"\/documentation\/deeplink\/deeplink","identifier":"doc:\/\/Deeplink\/documentation\/Deeplink\/Deeplink","navigatorTitle":[{"text":"Deeplink","kind":"identifier"}],"abstract":[{"type":"text","text":"An "},{"code":"enum","type":"codeVoice"},{"text":" that represents a deeplink template.","type":"text"}],"title":"Deeplink","kind":"symbol","role":"symbol","fragments":[{"text":"enum","kind":"keyword"},{"kind":"text","text":" "},{"kind":"identifier","text":"Deeplink"}],"type":"topic"},"doc://Deeplink/tutorials/Deeplink/Advanced-Usage#Altering-the-matching-behavior":{"identifier":"doc:\/\/Deeplink\/tutorials\/Deeplink\/Advanced-Usage#Altering-the-matching-behavior","abstract":[{"type":"text","text":"This tutorial is a small collection of advanced tips and tricks."}],"type":"section","url":"\/tutorials\/deeplink\/advanced-usage#Altering-the-matching-behavior","title":"Altering the matching behavior","kind":"section","role":"pseudoSymbol"},"doc://Deeplink/documentation/Deeplink/DeeplinksCenter":{"fragments":[{"text":"class","kind":"keyword"},{"text":" ","kind":"text"},{"kind":"identifier","text":"DeeplinksCenter"}],"identifier":"doc:\/\/Deeplink\/documentation\/Deeplink\/DeeplinksCenter","navigatorTitle":[{"text":"DeeplinksCenter","kind":"identifier"}],"role":"symbol","title":"DeeplinksCenter","kind":"symbol","url":"\/documentation\/deeplink\/deeplinkscenter","type":"topic","abstract":[{"type":"text","text":"Register deeplinks and parse URLs."}]},"doc://Deeplink/tutorials/Deeplink/Using-a-ResultBuilder#Conditionally-removing-templates":{"title":"Conditionally removing templates","abstract":[{"type":"text","text":"If you need advanced behaviors, you can also register your "},{"isActive":true,"type":"reference","identifier":"doc:\/\/Deeplink\/documentation\/Deeplink\/Deeplink"},{"type":"text","text":" templates using a "},{"type":"codeVoice","code":"@resultBuilder"},{"type":"text","text":"."}],"identifier":"doc:\/\/Deeplink\/tutorials\/Deeplink\/Using-a-ResultBuilder#Conditionally-removing-templates","role":"pseudoSymbol","type":"section","kind":"section","url":"\/tutorials\/deeplink\/using-a-resultbuilder#Conditionally-removing-templates"},"doc://Deeplink/tutorials/Table-of-Contents/Using-the-library":{"title":"Using the library","abstract":[],"identifier":"doc:\/\/Deeplink\/tutorials\/Table-of-Contents\/Using-the-library","role":"article","type":"topic","kind":"article","url":"\/tutorials\/table-of-contents\/using-the-library"},"doc://Deeplink/tutorials/Table-of-Contents":{"identifier":"doc:\/\/Deeplink\/tutorials\/Table-of-Contents","abstract":[{"text":"These tutorials will explain how to add deeplinks to your app, and how to manage more complex situations like overlapping deeplink templates or choosing at runtime whether to match a URL or not.","type":"text"}],"title":"🎣 All about Deeplinks","role":"overview","kind":"overview","url":"\/tutorials\/table-of-contents","type":"topic"},"doc://Deeplink/tutorials/Deeplink/Adding-a-Deeplink":{"title":"Adding Deeplinks","abstract":[{"text":"This tutorial will explain how to add deeplinks to your app and how to handle overlapping deeplink templates.","type":"text"}],"identifier":"doc:\/\/Deeplink\/tutorials\/Deeplink\/Adding-a-Deeplink","url":"\/tutorials\/deeplink\/adding-a-deeplink","type":"topic","role":"project","estimatedTime":"10min","kind":"project"},"AdvancedUsage 6.swift":{"syntax":"swift","content":["","\/\/ Example link: `https:\/\/example.com\/product\/123`","","import Deeplink","","struct Product: DefaultInitializable {","    var productId: String?","}","","let productDeeplink: Deeplink<Product> = try! \"\/product\/\\(\\.productId)\"","","let center = DeeplinksCenter()","","center","    .register(","        deeplink: productDeeplink,","        ifMatching: { url, value in","","        \/\/ Present the product view.","","        return true","    })"],"identifier":"AdvancedUsage 6.swift","type":"file","fileName":"DefaultInitializable demo.swift","highlights":[{"line":6}],"fileType":"swift"},"doc://Deeplink/tutorials/Deeplink/Adding-a-Deeplink#Adding-one-deeplink":{"title":"Adding one deeplink","abstract":[{"type":"text","text":"This tutorial will explain how to add deeplinks to your app and how to handle overlapping deeplink templates."}],"identifier":"doc:\/\/Deeplink\/tutorials\/Deeplink\/Adding-a-Deeplink#Adding-one-deeplink","role":"pseudoSymbol","type":"section","kind":"section","url":"\/tutorials\/deeplink\/adding-a-deeplink#Adding-one-deeplink"},"AdvancedUsage 3.swift":{"highlights":[{"line":22},{"line":23},{"line":27},{"line":28},{"line":29},{"line":30},{"line":31},{"line":32},{"line":33},{"line":34},{"line":35}],"type":"file","content":["","\/\/ Example link: `https:\/\/example.com\/product\/123`","","import Deeplink","","struct Product {","    var productId: String?","}","","let productDeeplink: Deeplink<Product> = try! \"\/product\/\\(\\.productId)\"","","func isMagicOn() -> Bool { true }","","let center = DeeplinksCenter()","","center","    .register(","        deeplink: productDeeplink,","        assigningTo: Product(),","        ifMatching: { url, value in","","        guard isMagicOn() else { return false }","        \/\/ Present the magic product view.","","        return true","    })","    .register(","        deeplink: productDeeplink,","        assigningTo: Product(),","        ifMatching: { url, value in","","        \/\/ Present the normal product view.","","        return true","    })"],"fileType":"swift","identifier":"AdvancedUsage 3.swift","fileName":"Altering matching.swift","syntax":"swift"},"AdvancedUsage 4.swift":{"highlights":[{"line":32},{"line":33},{"line":34}],"type":"file","content":["","\/\/ Example link: `https:\/\/example.com\/product\/123`","","import Deeplink","","struct Product {","    var productId: String?","}","","let productDeeplink: Deeplink<Product> = try! \"\/product\/\\(\\.productId)\"","","func isMagicOn() -> Bool { true }","","let center = DeeplinksCenter()","","center","    .register(","        deeplink: productDeeplink,","        assigningTo: Product(),","        ifMatching: { url, value in","","        guard isMagicOn() else { return false }","        \/\/ Present the magic product view.","","        return true","    })","    .register(","        deeplink: productDeeplink,","        assigningTo: Product(),","        ifMatching: { url, value in","","        guard url.absoluteString?.starts(with: \"https\") ?? false","        else { return false }","","        \/\/ Present the normal product view.","","        return true","    })"],"identifier":"AdvancedUsage 4.swift","fileType":"swift","fileName":"Altering matching.swift","syntax":"swift"},"doc://Deeplink/tutorials/Deeplink/Using-a-ResultBuilder":{"estimatedTime":"10min","identifier":"doc:\/\/Deeplink\/tutorials\/Deeplink\/Using-a-ResultBuilder","abstract":[{"text":"If you need advanced behaviors, you can also register your ","type":"text"},{"identifier":"doc:\/\/Deeplink\/documentation\/Deeplink\/Deeplink","type":"reference","isActive":true},{"type":"text","text":" templates using a "},{"type":"codeVoice","code":"@resultBuilder"},{"text":".","type":"text"}],"title":"Registering Deeplinks with a ResultBuilder","role":"project","kind":"project","url":"\/tutorials\/deeplink\/using-a-resultbuilder","type":"topic"},"doc://Deeplink/tutorials/Deeplink/Adding-a-Deeplink#Adding-more-deeplinks":{"title":"Adding more deeplinks","abstract":[{"type":"text","text":"This tutorial will explain how to add deeplinks to your app and how to handle overlapping deeplink templates."}],"identifier":"doc:\/\/Deeplink\/tutorials\/Deeplink\/Adding-a-Deeplink#Adding-more-deeplinks","role":"pseudoSymbol","type":"section","kind":"section","url":"\/tutorials\/deeplink\/adding-a-deeplink#Adding-more-deeplinks"},"doc://Deeplink/tutorials/Deeplink/Adding-a-Deeplink#Adding-a-deeplink-that-catches-a-list-of-parameters":{"title":"Adding a deeplink that catches a list of parameters","abstract":[{"type":"text","text":"This tutorial will explain how to add deeplinks to your app and how to handle overlapping deeplink templates."}],"identifier":"doc:\/\/Deeplink\/tutorials\/Deeplink\/Adding-a-Deeplink#Adding-a-deeplink-that-catches-a-list-of-parameters","role":"pseudoSymbol","type":"section","kind":"section","url":"\/tutorials\/deeplink\/adding-a-deeplink#Adding-a-deeplink-that-catches-a-list-of-parameters"}}}